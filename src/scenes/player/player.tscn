[gd_scene load_steps=22 format=3 uid="uid://duchts23k3yxm"]

[ext_resource type="Script" path="res://src/scenes/player/player.gd" id="1_6dcuc"]
[ext_resource type="Script" path="res://src/utility/state_machine/state_machine.gd" id="1_vniht"]
[ext_resource type="PackedScene" uid="uid://cg7pt0ick1aks" path="res://src/assets/guy.tscn" id="2_cngte"]
[ext_resource type="Script" path="res://src/scenes/player/camera_mount.gd" id="3_fv4qe"]
[ext_resource type="PackedScene" uid="uid://ow1cqvb3kb4u" path="res://src/assets/botter_animated.glb" id="3_p5nxa"]
[ext_resource type="Script" path="res://src/scenes/player/states/airborne.gd" id="4_ktq5s"]
[ext_resource type="Script" path="res://src/scenes/player/states/grounded.gd" id="5_6nusj"]
[ext_resource type="Script" path="res://src/scenes/player/states/jumping.gd" id="7_hbynt"]
[ext_resource type="Script" path="res://src/scenes/player/player_animator.gd" id="8_nq300"]

[sub_resource type="CapsuleMesh" id="CapsuleMesh_gngtj"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_gjp8o"]

[sub_resource type="SphereShape3D" id="SphereShape3D_3vwln"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_21jv3"]
animation = &"falling"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_hnecw"]
animation = &"attack_melee_1"

[sub_resource type="AnimationNodeBlend2" id="AnimationNodeBlend2_7lsdv"]
filter_enabled = true
filters = ["rig/Skeleton3D:ORG-forearm.L", "rig/Skeleton3D:ORG-forearm.R", "rig/Skeleton3D:ORG-hand.L", "rig/Skeleton3D:ORG-hand.L_end", "rig/Skeleton3D:ORG-hand.R", "rig/Skeleton3D:ORG-hand.R_end", "rig/Skeleton3D:ORG-shoulder.L", "rig/Skeleton3D:ORG-shoulder.R", "rig/Skeleton3D:ORG-upper_arm.L", "rig/Skeleton3D:ORG-upper_arm.R"]

[sub_resource type="AnimationNodeBlend2" id="AnimationNodeBlend2_ocx1f"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_jjbdc"]
animation = &"idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_f5ys7"]
animation = &"running"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_tt55p"]
animation = &"idle"

[sub_resource type="AnimationNodeBlendSpace1D" id="AnimationNodeBlendSpace1D_y8knu"]
blend_point_0/node = SubResource("AnimationNodeAnimation_jjbdc")
blend_point_0/pos = -1.0
blend_point_1/node = SubResource("AnimationNodeAnimation_f5ys7")
blend_point_1/pos = 1.0
blend_point_2/node = SubResource("AnimationNodeAnimation_tt55p")
blend_point_2/pos = 0.0
min_space = 0.0

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_3x7hp"]
graph_offset = Vector2(-207.986, -90.0834)
nodes/Animation/node = SubResource("AnimationNodeAnimation_21jv3")
nodes/Animation/position = Vector2(400, 240)
nodes/Attack/node = SubResource("AnimationNodeAnimation_hnecw")
nodes/Attack/position = Vector2(100, 140)
nodes/attacking/node = SubResource("AnimationNodeBlend2_7lsdv")
nodes/attacking/position = Vector2(360, 0)
nodes/falling/node = SubResource("AnimationNodeBlend2_ocx1f")
nodes/falling/position = Vector2(600, 120)
nodes/output/position = Vector2(820, 140)
nodes/running/node = SubResource("AnimationNodeBlendSpace1D_y8knu")
nodes/running/position = Vector2(100, -40)
node_connections = [&"attacking", 0, &"running", &"attacking", 1, &"Attack", &"falling", 0, &"attacking", &"falling", 1, &"Animation", &"output", 0, &"falling"]

[node name="Player" type="Node3D"]
script = ExtResource("1_6dcuc")

[node name="Body" type="CharacterBody3D" parent="."]
floor_snap_length = 0.2

[node name="Mesh" type="MeshInstance3D" parent="Body"]
visible = false
mesh = SubResource("CapsuleMesh_gngtj")

[node name="Collision" type="CollisionShape3D" parent="Body"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
shape = SubResource("CapsuleShape3D_gjp8o")

[node name="CameraTracker" type="RemoteTransform3D" parent="Body"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2, 0)
remote_path = NodePath("../../CameraMount")
update_rotation = false
update_scale = false

[node name="guy" parent="Body" instance=ExtResource("2_cngte")]
visible = false

[node name="rig" parent="Body/guy" index="0"]
transform = Transform3D(1.09753, 0.0337139, -0.123084, -0.0501104, 1.09393, -0.147193, 0.117368, 0.15179, 1.08814, -0.0315404, -0.0684282, -0.191763)

[node name="Skeleton3D" parent="Body/guy/rig" index="0"]
bones/1/rotation = Quaternion(-0.0417657, 0.125673, -0.00159202, 0.991191)
bones/2/rotation = Quaternion(-0.0109901, 0.0152603, 0.012072, 0.99975)
bones/3/rotation = Quaternion(-0.0276256, 0.0155325, 0.0106631, 0.999441)
bones/4/rotation = Quaternion(0.212323, -0.0115893, -0.00727316, 0.977104)
bones/5/rotation = Quaternion(-0.00691999, -0.0127312, -0.0050126, 0.999883)
bones/6/rotation = Quaternion(-0.15955, -0.0115639, -0.00731335, 0.987095)
bones/8/rotation = Quaternion(-0.57651, -0.353325, -0.433394, 0.595792)
bones/9/rotation = Quaternion(-0.283418, 0.931645, -0.167488, 0.153817)
bones/10/rotation = Quaternion(0.561069, 0.189727, 0.184448, 0.784336)
bones/11/rotation = Quaternion(-0.026307, -0.331753, -0.0271087, 0.94261)
bones/13/rotation = Quaternion(-0.595503, 0.340056, 0.41048, 0.601036)
bones/14/rotation = Quaternion(-0.0297707, -0.641671, 0.551874, 0.531796)
bones/15/rotation = Quaternion(0.6859, -0.162671, -0.225485, 0.672485)
bones/16/rotation = Quaternion(-0.0275684, 0.366282, -0.183404, 0.911834)
bones/26/rotation = Quaternion(0.856627, 0.0541813, -0.0561293, 0.510004)
bones/27/rotation = Quaternion(0.89604, -0.0397053, -0.055898, 0.438646)
bones/28/rotation = Quaternion(-0.693154, -0.0282644, -0.0182188, 0.720004)
bones/29/rotation = Quaternion(0.701062, 0.7108, -0.0553634, -0.0144981)
bones/31/rotation = Quaternion(0.992892, 0.0360814, 0.032513, 0.10866)
bones/32/rotation = Quaternion(0.247036, -0.0847725, 0.00568328, 0.965274)
bones/33/rotation = Quaternion(-0.720129, -0.0260881, -0.0510172, 0.691471)
bones/34/rotation = Quaternion(-0.660195, 0.688403, -0.242271, -0.177618)

[node name="botter_animated" parent="Body" instance=ExtResource("3_p5nxa")]

[node name="rig" parent="Body/botter_animated" index="0"]
transform = Transform3D(1.1047, 0.00676934, 0.021073, -0.00756755, 1.1041, 0.0420399, -0.0207996, -0.0421757, 1.10392, -0.0517037, -0.0211384, 0.0395675)

[node name="Skeleton3D" parent="Body/botter_animated/rig" index="0"]
bones/1/rotation = Quaternion(-0.150175, -0.00301446, 0.00232828, 0.988652)
bones/2/rotation = Quaternion(0.0296721, -0.0280614, 0.00335637, 0.99916)
bones/3/rotation = Quaternion(0.0124949, -0.0279324, 0.00449046, 0.999522)
bones/4/rotation = Quaternion(0.193702, 0.006112, -0.00977559, 0.980993)
bones/5/rotation = Quaternion(-0.0259216, 0.00420856, -0.0106779, 0.999598)
bones/6/rotation = Quaternion(-0.174725, 0.0061731, -0.00990653, 0.984548)
bones/8/rotation = Quaternion(-0.639919, -0.287279, -0.322643, 0.635512)
bones/9/rotation = Quaternion(-0.0535904, 0.759039, -0.591848, 0.265903)
bones/10/rotation = Quaternion(0.273244, 0.211104, 0.0309714, 0.937984)
bones/11/rotation = Quaternion(-0.171768, -0.292011, -0.0384629, 0.940078)
bones/12/rotation = Quaternion(0.0240571, 0.0443862, -0.237545, 0.970064)
bones/13/rotation = Quaternion(-0.593136, 0.352391, 0.388043, 0.611091)
bones/14/rotation = Quaternion(-0.0472663, -0.745378, 0.596777, 0.293317)
bones/15/rotation = Quaternion(0.278992, -0.210355, -0.0329647, 0.936391)
bones/16/rotation = Quaternion(-0.209698, 0.306736, -0.0435591, 0.927385)
bones/16/scale = Vector3(1, 1, 1)
bones/17/rotation = Quaternion(-0.021992, -0.0320751, 0.117901, 0.992263)
bones/26/rotation = Quaternion(0.981006, 0.0328379, -0.0532537, 0.183611)
bones/27/rotation = Quaternion(0.21173, -0.0713912, -0.0293959, 0.974274)
bones/28/rotation = Quaternion(-0.76436, -0.0843138, 0.0706755, 0.635335)
bones/29/rotation = Quaternion(0.702832, 0.708558, -0.0626315, -0.00709022)
bones/31/rotation = Quaternion(0.97776, -0.0101101, 0.0947705, 0.186821)
bones/32/rotation = Quaternion(0.214688, 0.0345634, 0.0211639, 0.975841)
bones/33/rotation = Quaternion(-0.768199, 0.0791824, -0.0491364, 0.633393)
bones/34/rotation = Quaternion(-0.703065, 0.708526, -0.0599658, 0.00977711)

[node name="BoneAttachment3D" type="BoneAttachment3D" parent="Body/botter_animated/rig/Skeleton3D" index="10"]
transform = Transform3D(-0.892134, -0.32462, 0.314194, 0.362785, -0.929238, 0.0700322, 0.269227, 0.176463, 0.946772, -0.383981, 0.920718, 0.151347)
bone_name = "ORG-hand.R"
bone_idx = 16

[node name="RemoteTransform3D" type="RemoteTransform3D" parent="Body/botter_animated/rig/Skeleton3D/BoneAttachment3D"]
transform = Transform3D(0.991872, -0.0536117, -0.115392, 0.0455978, 0.996433, -0.0710022, 0.118787, 0.0651634, 0.990779, -0.0510789, 0.188218, 0.0192941)
remote_path = NodePath("../../../../../../RightHand")

[node name="AnimationPlayer" parent="Body/botter_animated" index="1"]
autoplay = "running"

[node name="CameraMount" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2, 0)
script = ExtResource("3_fv4qe")

[node name="CameraArm" type="SpringArm3D" parent="CameraMount"]
shape = SubResource("SphereShape3D_3vwln")
spring_length = 4.0
margin = 0.2

[node name="Camera3D" type="Camera3D" parent="CameraMount/CameraArm"]

[node name="RightHand" type="Node3D" parent="."]
transform = Transform3D(-0.942279, -0.283541, 0.502556, 0.382516, -1.02744, 0.137528, 0.432021, 0.291266, 0.97436, -0.47743, 0.794276, 0.225745)

[node name="CSGCylinder3D" type="CSGCylinder3D" parent="RightHand"]
transform = Transform3D(-0.741147, 0.209154, -0.637929, -0.624651, 0.133331, 0.769437, 0.245986, 0.968751, 0.0318303, 0.0803518, -0.0648632, 0.302239)
radius = 0.022
height = 1.05811

[node name="State" type="Node" parent="."]
script = ExtResource("1_vniht")
initial_state = NodePath("Grounded")

[node name="Airborne" type="Node" parent="State" node_paths=PackedStringArray("player", "body", "animator")]
script = ExtResource("4_ktq5s")
player = NodePath("../..")
body = NodePath("../../Body")
animator = NodePath("../../AnimationTree")

[node name="Grounded" type="Node" parent="State" node_paths=PackedStringArray("player", "body", "animator")]
script = ExtResource("5_6nusj")
player = NodePath("../..")
body = NodePath("../../Body")
animator = NodePath("../../AnimationTree")

[node name="Jumping" type="Node" parent="State" node_paths=PackedStringArray("player", "body", "animator")]
script = ExtResource("7_hbynt")
player = NodePath("../..")
body = NodePath("../../Body")
animator = NodePath("../../AnimationTree")

[node name="AnimationTree" type="AnimationTree" parent="."]
root_node = NodePath("../Body/botter_animated")
tree_root = SubResource("AnimationNodeBlendTree_3x7hp")
anim_player = NodePath("../Body/botter_animated/AnimationPlayer")
parameters/attacking/blend_amount = 0.0
parameters/falling/blend_amount = 0.0
parameters/running/blend_position = 0.0
script = ExtResource("8_nq300")

[editable path="Body/guy"]
[editable path="Body/botter_animated"]
